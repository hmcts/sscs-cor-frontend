{% extends "layout.html" %}
{% from "components/error-summary/macro.njk" import govukErrorSummary %}

{% if action === 'options' %}
  {% set pageHeader, pageTitle = content[i18n.language].additionalEvidence.evidenceOptions.header %}
{% elseif action === 'post' %}
  {% set pageHeader, pageTitle = content[i18n.language].additionalEvidence.evidencePost.header %}
{% elseif action === 'upload' %}
  {% set pageHeader, pageTitle = content[i18n.language].additionalEvidence.evidenceUpload.header %}
{% elseif action === 'statement' %}
  {% set pageHeader, pageTitle = content[i18n.language].additionalEvidence.evidenceStatement.header %}
{% elseif action === 'confirm' %}
  {% set pageHeader, pageTitle = content[i18n.language].additionalEvidence.evidenceConfirm.header %}
{% endif %}

{% block pageTitle %}
  {% if pageTitleError %}
    {{ content[i18n.language].errorSummary.errorPageTitle }} {{ pageTitle }} - {{ content[i18n.language].general.serviceTitle }} - {{ content[i18n.language].general.govUK }}
  {% else %}
    {{ pageTitle }} - {{ content[i18n.language].general.serviceTitle }} - {{ content[i18n.language].general.govUK }}
  {% endif %}
{% endblock %}

{% block beforeContent %}
  {{ super() }}
  {% if action === 'options' %}
    <a href="/task-list" class="govuk-back-link">{{ content[i18n.language].general.back }}</a>
  {% elseif action !== 'confirm' %}
    <a href="/additional-evidence" class="govuk-back-link">{{ content[i18n.language].general.back }}</a>
  {% endif %}
{% endblock %}

{% block corContent %}
    <div class="govuk-grid-row">
        {% if error or fileUploadError %}
            {{ govukErrorSummary({
                titleText: content[i18n.language].errorSummary.titleText,
                descriptionText: content[i18n.language].errorSummary.descriptionText,
                errorList: [
                  {
                    text: error,
                    href: "#question-field"
                  } if error,
                  {
                    text: fileUploadError,
                    href: "#file-field"
                  } if fileUploadError
                ]
            }) }}
        {% endif %}

        {% if action === 'options' %}
            {% include "additional-evidence/evidence-options.html" %}
        {% elseif action === 'post' %}
            {% include "includes/post-evidence.html" %}
        {% elseif action === 'upload' %}
            {% include "additional-evidence/evidence-upload.html" %}
        {% elseif action === 'statement' %}
            {% include "additional-evidence/evidence-statement.html" %}
        {% elseif action === 'confirm' %}
            {% include "additional-evidence/evidence-confirm.html" %}
        {% endif %}
    </div>
{% endblock %}
