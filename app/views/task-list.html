{% extends "layout.html" %}

{% block content %}
<div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">

        <h1 class="govuk-heading-xl">{{ i18n.taskList.header }}</h1>

        {% if hearing.appellant_name %}
            <div id="appeal-details">
                <h2 class="govuk-heading-m">
                    <span id="appellant-name">{{ hearing.appellant_name }}</span>
                    <a id="logout" class="govuk-link" href="/logout">Logout</a>
                </h2>
                <p>Appeal reference: <span id="case-reference">{{ hearing.case_reference }}</span></p>
            </div>
        {% endif %}
    </div>
</div>

<div class="govuk-grid-row">
    <div class="govuk-grid-column-full">
        <div class="divider"></div>
    </div>
</div>

<div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">
        <div id="task-list">
            <h2 class="govuk-heading-s">Questions from the tribunal</h2>
            <p>
                <span id="deadline-status">{{ i18n.taskList.deadline[deadlineExpiryDate.status] }}</span> <span id="deadline-date">{{ deadlineExpiryDate.formatted }}</span>.
                {% if deadlineExpiryDate.extensionAllowed %}
                    <a id="extend-deadline" class="govuk-link" href="/extend-deadline">Extend the deadline</a>
                {% endif %}
            </p>
            <ul class="govuk-list">
                {% for question in questions %}
                    {% set answerState = question.answer_state %}
                    <li id="question-{{ question.question_id }}">
                        <a class="govuk-link" href="/question/{{ hearing.online_hearing_id or hearingId }}/{{ question.question_id }}">{{ question.question_header_text }}</a>
                        {% if answerState != 'unanswered' %}
                            <span class="answer-state {{ question.answer_state }}">
                                {{
                                    i18n.taskList.answerState.completed
                                    if answerState === 'submitted'
                                    else i18n.taskList.answerState.draft
                                }}
                            </span>
                        {% endif %}
                    </li>
                {% endfor %}
            </ul>
        </div>

        <!--
        this remains here as fallback for non-signed in users
        it should be removed once auth is handled properly using IDAM
         -->
        {% set reference = "SC242/16/03435" %}
        <h2 class="govuk-heading-s">{{ i18n.taskList.sendingEvidence.header }}</h2>
        <p>{{ i18n.taskList.sendingEvidence.intro }}</p>

        <details id="sending-evidence-guide" class="govuk-details">
            <summary class="govuk-details__summary">
                <span class="govuk-details__summary-text">
                  {{ i18n.taskList.sendingEvidence.summary }}
                </span>
            </summary>
            <div class="govuk-details__text">
                <p>{{ i18n.taskList.sendingEvidence.details.para1 }} <strong>{{ reference }}</strong></p>

                {% include "includes/sending-evidence-contact-details.html" %}

                <p>{{ i18n.taskList.sendingEvidence.details.closingPara1 }}</p>
                <p>{{ i18n.taskList.sendingEvidence.details.closingPara2 }}</p>
            </div>
        </details>

    </div>
</div>
{% endblock %}
